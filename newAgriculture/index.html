<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <title>浙江农业</title>

    <link href="Javascript/ArcGISAPI/3.16/esri/css/esri.css" rel="stylesheet" />
    <link href="css/gisframe.css" rel="stylesheet" />
    <link href="css/nylq.css" rel="stylesheet" />
    <link href="css/reset.css" rel="stylesheet" />


    <style>
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        #map {
            margin: 0;
            padding: 0;
        }
        .slide li{
            box-sizing:content-box;
        }
     
    </style>

    <script>

        var selfUrl = document.location.href.substring(0, document.location.href.lastIndexOf("/"));
        dojoConfig = {
            parseOnLoad: true,
            baseUrl: "Javascript/ArcGISAPI/3.16/dojo",
            packages: [
        {
            name: 'mapconfig',
            location: selfUrl + "/Javascript/config",
            main: "config"

        }, {
            name: 'extras',
            location: selfUrl + "/extras",
            main: "extras"

        }, {
            name: 'Framework',
            location: selfUrl + "/Javascript/Framework",
            main: "Framework"

        }
            ]
        }
    </script>   
    <script src="Javascript/lib/jquery-1.8.3.js"></script>
    <script src="Javascript/config/layerConfig.js"></script>
    <script src="Javascript/ArcGISAPI/3.16/init.js"></script>
    <script>
        var map;
        var ClusterData;
        var searchLayer;
        var tempLayer;
        var showClusterData = [];
        var statisticsData = [];
        var clusterType = [];
        var statisType = [];
        var clusterImg = [];
        var layerDType = [];
        var textColor = "#fff";
        var sssy = "";
        var ssqy = "";
        var firstAttr = "";
        var secendAttr = "";
        var currenturl = "";
        var currentattr = "";
        var searchField = "";
        var visiableArray = [0];
        var areasql = [];
        var dkType = "粮食生产功能区";
        var gnType = "功能区级别";
        var currentGraphic;
        var upLevel;
        var midLevel;
        var downLevel;
        var mapPanEvt;
        var fieldInfos;
        var areaClick;
        var typeNumber = [];
        var type = "farmArea";
        var bool = false;
        var searchSql = "";
        var total = 0;
        var blockNumber = [];
        var pUrl = "";
        var pArray = [];
        var cityLayer;
        
        require([
          "dojo/parser",
          "dojo/ready",
          "dojo/_base/array",
          "esri/Color",
          "dojo/dom-style",
          "dojo/query",
          "esri/layers/ImageParameters",
          "esri/map",
          "esri/request",
          "esri/graphic",
          "esri/geometry/Extent",

          "esri/symbols/SimpleMarkerSymbol",
          "esri/symbols/SimpleLineSymbol",
          "esri/symbols/SimpleFillSymbol",
          "esri/symbols/PictureMarkerSymbol",
          "esri/renderers/ClassBreaksRenderer",

          "esri/layers/GraphicsLayer",
          "esri/SpatialReference",
          "esri/InfoTemplate",
          "esri/dijit/PopupTemplate",
          "esri/geometry/Point",
          "esri/geometry/webMercatorUtils",
          "esri/layers/ArcGISDynamicMapServiceLayer",
          "TDTLayer2",
          "TDTLayer_Anno",

          "mapconfig/citycode",
          "mapconfig",
          "dojo/on",
          "dojo/dom-class", "dojo/dom-style",
          "dijit/layout/BorderContainer",
          "dijit/layout/ContentPane",
          "dojo/domReady!"
        ], function (
          parser, ready, arrayUtils, Color, domStyle, query, ImageParameters,
          Map, esriRequest, Graphic, Extent,
          SimpleMarkerSymbol, SimpleLineSymbol, SimpleFillSymbol, PictureMarkerSymbol, ClassBreaksRenderer,
          GraphicsLayer, SpatialReference, InfoTemplate, PopupTemplate, Point, webMercatorUtils, ArcGISDynamicMapServiceLayer, TDTLayer, TDTLayer_Anno,
        citycode,mapconfig, on, domClass, domStyle
        ) {

            esri.config.defaults.io.corsDetection = false;
            upLevel = mapconfig.maxZoom;
            midLevel = mapconfig.midZoom;
            downLevel = mapconfig.minZoom;
            var clusterLayer;
            var popupOptions = {
                "markerSymbol": new SimpleMarkerSymbol("circle", 20, null, new Color([0, 0, 0, 0.25])),
                "marginLeft": "20",
                "marginTop": "20"
            };
            var initextent = new Extent(120.135361472, 30.2208220636, 120.185361472, 30.2708220636, new SpatialReference({ wkid: 4326 }));
            var fullExtent = new Extent(118.33968849655, 29.1885894750343, 120.75238251614, 30.6257261531396, new SpatialReference({ "wkid": 4326 }));
            map = new Map("map", {
                logo: false,
                slider: false,
                center: [120.19, 30.26],
                  zoom: 5
            });
            var layer = new TDTLayer("img");
            map.addLayer(layer, 0);
            searchLayer = new GraphicsLayer({ id: "searchLayer" });
            map.addLayer(searchLayer, 3);

            var annolayer = new TDTLayer_Anno("cia");
            cityLayer = new GraphicsLayer({ id: "cityLayer" });
            map.addLayer(cityLayer, 4);
            $(function () {
                Array.prototype.indexOf = function (val) {
                    for (var i = 0; i < this.length; i++) {
                        if (this[i] === val) return i;
                    }
                    return -1;
                };
                Array.prototype.remove = function (val) {
                    var index = this.indexOf(val);
                    if (index > -1) {
                        this.splice(index, 1);
                    }
                };
                Array.prototype.contains = function (obj) {
                    var i = this.length;
                    while (i--) {
                        if (this[i] === obj||this[i]===obj.toString()) {
                            return true;
                        }
                    }
                    return false;
                }
                bindEvtListener();
                $("#proSelect a").eq(0).trigger("click");
                $(".infocontent").hide();
                initData();
               // setTimeout(initData, 300);
            })
            function initData() {
                sssy = "浙江省";
                firstAttr = "粮食生产功能区";
                secondAttr = "功能区级别";
                searchField = layerConfig[firstAttr][secondAttr].searchField;
                jsonurl = layerConfig[firstAttr][secondAttr].jsondata;
                fieldInfos = layerConfig[firstAttr][secondAttr].fieldInfos;
                currenturl = layerConfig["粮食生产功能区"]["功能区级别"].url;
                visiableArray = layerConfig["粮食生产功能区"]["功能区级别"].array;
                clusterType = ["省级", "市级", "县级"];
                statisType = ["省级", "市级", "县级"];
                clusterImg = ["images/gis/省市县/省.png", "images/gis/省市县/市.png", "images/gis/省市县/县.png"];
                layerDType = ["'省级'", "'市级'", "'县级'"];
                currentattr = "建设等级";
                pUrl = layerConfig["粮食生产功能区"]["功能区级别"].pUrl;
                pArray = layerConfig["粮食生产功能区"]["功能区级别"].pArray;
                
                $.ajax({
                    url: jsonurl,
                    dataType: 'json',
                    type: "GET",
                    async: false,
                    data: {},
                    success: function (data) {
                        ClusterData = data.features;
                    }

                });
                var popupTemplate = new PopupTemplate({
                    "title": "属性信息",
                    "content": "聚集点信息",
                    "fieldInfos": fieldInfos,
                });
                tempLayer = new GraphicsLayer({ id: "tempLayer", popupTemplate: popupTemplate });
                map.addLayer(tempLayer, 4);
                map.on("extent-change", function () {
                    require(["Framework/SwitchLayer"], function (SwitchLayer) {
                        SwitchLayer.switchLayer();
                    });                  
                    getblcok(sssy);
                })


            }
            function bindEvtListener() {

                var MapMenu = dojo.query(".MapMenu a");
                on(MapMenu[0], "click", function (e) {

                    domClass.remove(MapMenu[1], "Mapsatellite1");
                    domClass.add(MapMenu[1], "Mapsatellite");
                    domClass.add(MapMenu[0], "Mapmap1");
                    showLayer("VECTOR");
                    textColor = "#000";

                });
                on(MapMenu[1], "click", function (e) {

                    domClass.remove(MapMenu[0], "Mapmap1");
                    domClass.add(MapMenu[0], "Mapmap");
                    domClass.add(MapMenu[1], "Mapsatellite1");
                    showLayer("RASTER");
                    textColor = "#fff";

                });
                $(".MapMenu a").on("mouseover", function () {
                    $(this).children("label").show();

                })
                $(".MapMenu a").on("mouseout", function () {
                    $(this).children("label").hide();

                })
                $(".zoomin").click(function () {
                    map.setZoom(map.getZoom() + 1);
            })
                $(".zoomout").click(function () {
                    map.setZoom(map.getZoom() -1);
                })
                $(".MapMenu input").on("click", function (event) {
                    console.log($(this).attr("value"));



                    if ($(this).attr("value") == "矢量注记") {
                        if ($(this).attr("data-state") == "uncheck") {

                            var annolayer = new TDTLayer_Anno("cva");//影像cia 矢量cva
                            map.addLayer(annolayer, 1);
                            $(this).attr("data-state", "check")
                        } else {

                            if ($("#map_cva")) {
                                $("#map_cva").remove();
                            }
                            $(this).attr("data-state", "uncheck")

                        }

                    } else {
                        if ($(this).attr("data-state") == "uncheck") {

   
                            var annolayer = new TDTLayer_Anno("cia");//影像cia 矢量cva
                            map.addLayer(annolayer, 1);
                            $(this).attr("data-state", "check")
                        } else {
                            if ($("#map_cia")) {
                                $("#map_cia").remove();
                            }


                            $(this).attr("data-state", "uncheck")

                        }
                    }

                })
                //控制缩进
                $('.slide .srBtn').toggle(function () {

                    $('.slide').animate({ 'left': -250 }, 300);

                    $(this).css('background', 'url(images/srBtn1.png)');

                }, function () {

                    $('.slide').animate({ 'left': 18 }, 300);

                    $(this).css('background', 'url(images/srBtn.png)');

                });
                //dkType点击
                $('.slide .jcdBox .jcd').click(function () {
                    $('.slide .jcdBox .jcd img').attr('src', 'images/check.png');
                    $(this).find('img').attr('src', 'images/check_active.png');
                    var type = $(this).find('span').text();
                    dkType = type;
                  if (type == "粮食生产功能区") {
                      $("#yqClass").css("display", "none");
                      $("#lsClass").css("display", "block");
                      $("#lsClass li").eq(0).trigger("click");

                  } else if (type == "现代农业园区") {
                      $("#yqClass").css("display", "block");
                      $("#lsClass").css("display", "none");
                      $("#yqClass li").eq(0).trigger("click");
                  }
                });
                
              
                $(".sel").change(function () {
                    sssy = $(this).children('option:selected').text();
                    ssqy = "";
                    getQx(sssy);
                })
                $(".slide .sjBox .tabBox1").on("click", "li", function () {
                    if ($(this).find("span").first().hasClass("sj")) {
                        sssy = $(this).find(".sj").text();
                        ssqy = "";
                        var code = citycode.citycode[sssy];
   
                        $(".sel").val(code.toString());
                        getQx(sssy);
                    } else if ($(this).find("span").first().hasClass("xj")) {
                        ssqy = $(this).find(".xj").text();
                        var lat = $(this).find(".xj").attr("xjlat");
                        var lng = $(this).find(".xj").attr("xjlng");
                        $(".tabBox1 li").removeClass("active");
                        $(this).addClass("active");
                        if (map != undefined) {
                            map.centerAndZoom([parseFloat(lng), parseFloat(lat)], mapconfig.maxZoom + 1);
                        }
                    }
                  
                });

             
    
                $('.slide .qhBox li').click(function () {
                    $('.slide .qhBox li').removeClass('active');
                    $(this).addClass('active');
                    clusterType.length = 0;
            
                    layerDType.length = 0;
                    statisType.length = 0;
                    currentattr = "";

                    gnType = $(this).text();
       
                    var $clazz = $(this).attr("class");
                    $clazz = $clazz.split(" ");
                    $(".checksBox .jb").css("display", "none");
                    $clazz.map(function (item) {
                        if (item != "active") {
                            $(".checksBox ." + item).css("display", "block");
                            currentattr = $(".checksBox").find("." + item).attr("value");
                            var $types = $("." + item + " .jbBox");
                            //填充数组
                            
                            $types.each(function (i, e) {
                                if ($(e).hasClass("active")) {
                                    if (dkType == "粮食生产功能区") {
                                        clusterType.push($(e).children().last().text());
                            
                                        layerDType.push("'" + $(e).children().last().text() + "'");
                     
                                    } else if (dkType == "标准农田") {
                                        // statisType
                                        clusterType.push($(e).next().attr("value"));
                                        layerDType.push($(e).next().attr("value"));
              
                                    } else {
                                        clusterType.push($(e).children().last().text());
                                        layerDType.push("'" + $(e).children().last().text() + "'");
                                  
                                    }
                                    statisType.push($(e).children().last().text());


                                }
                            })
                            loadData(dkType,gnType);

                        }})
                    
                })

   
                $('.slide .jb .jbBox').each(function (index, el) {
                    $(el).toggle(function () {
          
                        if ($(el).hasClass('active')) {
                            $(el).removeClass('active');
                            clusterType.remove($(el).children().last().text());
                            statisType.remove($(el).children().last().text());
                            layerDType.remove("'" + $(el).children().last().text() + "'");
                        } else {
                            $(el).addClass('active');
                            clusterType.push($(el).children().last().text());
                            statisType.push($(el).children().last().text());
                            layerDType.push("'" + $(el).children().last().text() + "'");
                           
                        }
                        if (currentattr != "") {
                     
                            require(["Framework/SwitchLayer"], function (SwitchLayer) {
                                SwitchLayer.switchLayer();
                            });
                        } else {
                            clusterType.length = 0;
                            layerDType.length = 0;
                            clusterImg.length = 0;
                            statisType.length = 0;
                        }
                       
                    }, function () {
                 
                        if ($(el).hasClass('active')) {
                            $(el).removeClass('active');
                            clusterType.remove($(el).children().last().text());
                            statisType.remove($(el).children().last().text());
                            layerDType.remove("'" + $(el).children().last().text() + "'");
                        } else {
                            $(el).addClass('active');
                            clusterType.push($(el).children().last().text());
                            statisType.push($(el).children().last().text());
                            layerDType.push("'" + $(el).children().last().text() + "'");
                        }
                       
                        if (currentattr != "") {
                 
                            require(["Framework/SwitchLayer"], function (SwitchLayer) {
                                SwitchLayer.switchLayer();
                            });
                        } else {
                            clusterType.length = 0;
                            layerDType.length = 0;
                            clusterImg.length = 0;
                            statisType.length = 0;
                        }
                    })
                });
     
                
                $(".searchBox input").keyup(function () {
                    if ($(".searchBox input").val() == "") {
                        $(".clearinput").hide();
                    }
                    else {
                        $(".clearinput").show();
                    }

                })
                $("#searchList ul").on("click", "li", function () {
                    $("#searchList ul li").css("background-color", "#fff");
                    $(this).css("background-color", "#0094ff ");

                    var index = Number($(this).attr("index"));

                    tempLayer.clear();
                    var lng = Number($(this).attr("x"));
                    var lat= Number($(this).attr("y"));


                    var sfs = new SimpleFillSymbol(SimpleFillSymbol.STYLE_SOLID, new SimpleLineSymbol(SimpleLineSymbol.STYLE_DASHDOT, new Color([0, 0, 255]), 2), new Color([255, 255, 0, 0.25]));
                    var polygon = searchLayer.graphics[index].geometry;
                    var attr = searchLayer.graphics[index].attributes;
                    var tempGraphic = new Graphic(polygon, sfs, searchLayer.graphics[index], attr);
               
                    tempLayer.add(tempGraphic);
               

                    var cp = polygon.getExtent().getCenter();
                    var content;
                    require(["Framework/SwitchLayer", "Framework/IdentifyTask"], function (SwitchLayer, IdentifyTask) {
                        content = IdentifyTask.getShowInfo(attr);
                    });

                  
                    map.infoWindow.setContent(content);
                    map.infoWindow.show(cp);
              
                    map.centerAndZoom([lng, lat], upLevel + 1);
                    map.infoWindow.show(cp);
                })
                $("#searchListHead img").click(function () {
                    $("#searchList ul").html("");
                    $("#searchList").hide();
                    $("#searchListHead").hide();
                })
                $(".soo").click(function () {
                    searchLayer.clear();
                    tempLayer.clear();
                    console.log($(".searchBox input").val());
                    if ($(".searchBox input").val() != "") {
       
                        require(["Framework/SwitchLayer", "Framework/IdentifyTask"], function (SwitchLayer, IdentifyTask) {
                            searchSql = SwitchLayer.getSearchSql($(".searchBox input").val());
                            IdentifyTask.queryBySearch();
                        });

                    } else {
                        alert("请输入名称");
                    }
                    return false;

                });
                $(".clearinput").click(function () {
                    $(".searchBox input").val("");
                    $(this).hide();
                    $("#searchList ul").html("");
                    $("#searchList").hide();
                    $("#searchListHead").hide();
                    searchLayer.clear();
                    tempLayer.clear();
                    map.infoWindow.hide();
                });
            }
            function loadData(nyName,secondName) {
                if (nyName && secondName) {
                    currenturl = layerConfig[nyName][secondName].url;
                    visiableArray = layerConfig[nyName][secondName].array;
                    searchField = layerConfig[nyName][secondName].searchField;
                    pUrl = layerConfig[nyName][secondName].pUrl;
                    pArray = layerConfig[nyName][secondName].pArray;
                }
                if (currenturl != "") {
                    fieldInfos = layerConfig[nyName][secondName].fieldInfos;
                    var url = layerConfig[nyName][secondName].jsondata;
                    $.ajax({
                        url: url,
                        dataType: 'json',
                        type: "GET",
                        async: true,
                        data: {},
                        success: function (data) {

                            ClusterData = data.features;

                            require(["Framework/SwitchLayer"], function (SwitchLayer) {
                                SwitchLayer.switchLayer();
                            });
                        }
                    });
                }
                else {
                    ClusterData.length = 0;
                 
                }
            }
            function getQx(cityName) {
                var html = "<ul class=\"clearfix\">";
                if (cityName == "浙江省") {
                        $.ajax({
                            url: 'Json/area.xml',
                            dataType: 'xml',
                            success: function (data) {
                                $(data).find("root").find("sjzone").each(function (index, ele) {
                                    var id = $(ele).attr("id");
                                    var value = $(ele).attr("value");
                                    var name = $(ele).attr("name");
                                    html += "<li class=\"clearfix\">"
                                   + "<span class='s1 fl sj' >" + name + "</span>"
                                   + "</li>";
                                })
                                html += "</ul>";
                                $(".tabBox1").html(html);
                                map.centerAndZoom([120.19, 30.26], downLevel);
                            }
                        })
                } else {
                    $.ajax({
                        url: 'Json/area.xml',
                        dataType: 'xml',
                        success: function (data) {
                            $(data).find("root").find("sjzone").each(function (index, ele) {
                                var id = $(ele).attr("id");
                                var name = $(ele).attr("name");
                                if (cityName == name) {
                                    var lat = Number($(ele).attr("lat"));
                                    var lng = Number($(ele).attr("lng"));

                                    if (map != undefined) {
                                        map.centerAndZoom([lat, lng], mapconfig.minZoom + 1);
                                    }
                                    $(ele).find("xjzone").each(function (indexx, elex) {
                                        var xjid = $(elex).attr("id");
                                        var xjName = $(elex).attr("name");
                                        var xjLat = $(elex).attr("lat");
                                        var xjLng = $(elex).attr("lng");
                                        var hasXjvalue = $(elex).attr("value");
                                        var url = $(elex).attr("url");
                                        var layerindex;
                                        if ($(elex).attr("layerindex") != "") {
                                            layerindex = $(elex).attr("layerindex");
                                        } else {
                                            layerindex = 0;
                                        }
                                        var xjvalue = 0;
                                        if (hasXjvalue) {
                                            xjvalue = hasXjvalue;
                                        }
                                        html += "<li class=\"clearfix\">"
                                       + "<span xjid=" + xjid + " xjName=" + xjName + " xjLat=" + xjLat + " xjLng=" + xjLng + " class='s1 fl xj' id='xjtd" + xjid + "'>" + xjName + "</span>"
                                       + "</li>";
                                    });
                                }
                            });
                            html += "</ul>"
                            $(".tabBox1").html(html);
                        }
                    });
                }
              
                
            }
            function bindEvt() {

                var MapMenu = dojo.query(".MapMenu a");
                on(MapMenu[0], "click", function (e) {
    
                    domClass.remove(MapMenu[1], "Mapsatellite1");
                    domClass.add(MapMenu[1], "Mapsatellite");
                    domClass.add(MapMenu[0], "Mapmap1");
                    showLayer("VECTOR");
                    textColor = "#000";

                });
                on(MapMenu[1], "click", function (e) {

                    domClass.remove(MapMenu[0], "Mapmap1");
                    domClass.add(MapMenu[0], "Mapmap");
                    domClass.add(MapMenu[1], "Mapsatellite1");
                    showLayer("RASTER");
                    textColor = "#fff";

                });
                $(".MapMenu a").on("mouseover", function () {
                    $(this).children("label").show();

                })
                $(".MapMenu a").on("mouseout", function () {
                    $(this).children("label").hide();

                })

                $(".MapMenu input").on("click", function (event) {
                    console.log($(this).attr("value"));


         
                    if ($(this).attr("value") == "矢量注记") {
                        if ($(this).attr("data-state") == "uncheck") {


                            var annolayer = new TDTLayer_Anno("cva");
                            map.addLayer(annolayer, 1);
                            $(this).attr("data-state", "check")
                        } else {

                            if ($("#map_cva")) {
                                $("#map_cva").remove();
                            }
                            $(this).attr("data-state", "uncheck")

                        }

                    } else {
                        if ($(this).attr("data-state") == "uncheck") {


                            var annolayer = new TDTLayer_Anno("cia");
                            map.addLayer(annolayer, 1);
                            $(this).attr("data-state", "check")
                        } else {
                            if ($("#map_cia")) {
                                $("#map_cia").remove();
                            }

                            $(this).attr("data-state", "uncheck")

                        }
                    }

                })

                var toorbarState = false;
                $("#toorbars").click(function (e) {
                    $("#Analyse-tools").toggle("slow");
                    if (toorbarState) {
                        $("#toorbars img").attr("src", "images/Ntool.png");
                        toorbarState = false;
                    } else {
                        $("#toorbars img").attr("src", "images/Ntool2.png");
                        toorbarState = true;
                    }

                }
                )
                $("#Analyse-tools li").click(function (e) {
                    var evt = e.currentTarget.childNodes[0].alt;
                    $("#Analyse-tools span").css("color", "#000");
                    $(this).children("span").css("color", "#0094ff");
                    switch (evt) {

                        case "框选查询":
                            if (currentLayerServiceUrl != "") {
                                drawState = 0;
                                toolbar.activate(esri.toolbars.Draw.RECTANGLE);
                                map.setMapCursor("crosshair");
                            } else {
                                alert("请切换到县级");
                                $(this).children("span").css("color", "#000");
                            }
                            break;
                        case "测量距离":
                            drawState = 1;
                            if (iQueryDk) {
                                iQueryDk.remove();
                                iQueryDk = "";
                            }

                            toolbar.activate(esri.toolbars.Draw.POLYLINE);
                            map.setMapCursor("crosshair");
                            break;
                        case "测量面积":
                            drawState = 1;
                            if (iQueryDk) {
                                iQueryDk.remove();
                                iQueryDk = "";
                            }
                            toolbar.activate(esri.toolbars.Draw.POLYGON);
                            map.setMapCursor("crosshair");
                            break;
                        case "统计分析":
                            if (toolbar) {
                                toolbar.deactivate();
                            }

                            break;
                        case "清除高亮":
                            ClearMap();
                            hidePanel();
                            $("#Analyse-tools span").css("color", "#000");
                            break;

                    }

                })

                $(".checks").find("label").each(function () {
                    $(this).on("click", function () {
                        var attrName = $(this).parent().parent().parent().parent().attr("value");
                        console.log(attrName);

                            if ($(this).attr("data-state") == "uncheck") {
                                $(this).attr("data-state", "check");
                                $(this).addClass("active");

                                if (dkType == "粮食生产功能区") {
                                    clusterType.push($(this).next().text());
                                    layerDType.push("'" + $(this).next().text() + "'");
                                    clusterImg.push($(this).attr("imgvalue"));
                                } else if (dkType == "标准农田") {
                                    clusterType.push($(this).next().attr("value"));
                                    layerDType.push($(this).next().attr("value"));
                                    clusterImg.push($(this).attr("imgvalue"));
                                } else {
                                    clusterType.push($(this).next().text());
                                    layerDType.push("'" + $(this).next().text() + "'");
                                    clusterImg.push($(this).prev().prev().attr("src"));
                                }
                                statisType.push($(this).next().text());
                                console.log(clusterType);
                            } else {
                                $(this).attr("data-state", "uncheck");
                                $(this).removeClass("active");
   
                                if (dkType == "粮食生产功能区") {
                                    clusterType.remove($(this).next().text());
                                    layerDType.remove("'" + $(this).next().text() + "'");
                                    clusterImg.remove($(this).attr("imgvalue"));
                                } else if (dkType == "标准农田") {
                                    clusterType.remove($(this).next().attr("value"));
                                    layerDType.remove($(this).next().attr("value"));
                                    clusterImg.remove($(this).attr("imgvalue"));
                                } else {
                                    clusterType.remove($(this).next().text());
                                    layerDType.remove("'" + $(this).next().text() + "'");
                                    clusterImg.remove($(this).prev().prev().attr("src"));
                                }
                                statisType.remove($(this).next().text());
                            }
                            if (attrName != "") {

                                require(["Framework/SwitchLayer"], function (SwitchLayer) {
                                    SwitchLayer.switchLayer();
                                });
                            } else {
                                clusterType.length = 0;
                                layerDType.length = 0;
                                clusterImg.length = 0;
                                statisType.length = 0;
                            }

                    })
                });

                $(".btns").on("click", "li", function () {

                    if($(this).text()!="标准农田"){
                        $(this).addClass("active").siblings().removeClass("active");
                        var $index = $(this).index();
                        $(".infocontent .control").find("ul.second").eq($index).show().siblings("ul.second").hide();

                        $(".control").find("ul.second").eq($index).find("li").eq(0).trigger("click");
                    } else {
                        alert("暂无数据");
                    }
                

                });

                $(".control").find(".second").each(function () {
                    $(this).on("click", "li", function () {
                        clusterType.length = 0;
                        clusterImg.length = 0;
                        layerDType.length = 0;
                        statisType.length = 0;
                        currentattr = "";
                        var rmap = map.getLayer("ls");
                        if (rmap) {
                            map.removeLayer(rmap);
                            if ($("#map_ls")) {
                                $("#map_ls").remove();
                            }
                        }
                        if (map.getLayer("clusters")) {
                            map.removeLayer(map.getLayer("clusters"));
                        }

                        $(this).addClass("active").siblings().removeClass("active");
                        var $clazz = $(this).attr("class");
                        $clazz = $clazz.split(" ");
                        var nyName;
                        $(".btns li").each(function (i, e) {
                            if ($(e).hasClass("active")) {
                                nyName = $(e).text();

                            }

                        })
                        dkType = nyName;
                        var secondName = $(this).text();
                        gnType = secondName;

                        var attr_Name;
                        $clazz.map(function (item) {
                            if (item != "active") {
                                var currentCheck = $(".checks").find("." + item);
                                currentCheck.show().siblings("ul").hide();

                                attr_Name = $(".checks").find("." + item).attr("value");
                                currentattr = attr_Name;
                                console.log(attr_Name);

                                var $types = $(".checks").find("." + item + " label");

                                $types.each(function (i, e) {
                                    if ($(e).attr("data-state") == "check") {
                                        if (nyName == "粮食生产功能区") {
                                            clusterType.push($(e).next().text());
                                            
                                            layerDType.push("'" + $(e).next().text() + "'");
                                            clusterImg.push($(e).attr("imgvalue"));
                                        } else if (nyName == "标准农田") {

                                            clusterType.push($(e).next().attr("value"));
                                            layerDType.push($(e).next().attr("value"));
                                            clusterImg.push($(e).attr("imgvalue"));
                                        } else {
                                            clusterType.push($(e).next().text());
                                            layerDType.push("'" + $(e).next().text() + "'");
                                            clusterImg.push($(e).prev().prev().attr("src"));
                                        }
                                        statisType.push($(e).next().text());
                                        

                                    }
                                })
                            }
                        })

                        switch (secondName) {
                            case "提升工程":
                                clusterType.length = 0;
                                layerDType.length = 0;
                                statisType.length=0

                                break;
                            case "现代农业综合区":
                                clusterType.length = 0;
                                layerDType.length = 0;

                                break;
                            default:
                                break;
                        }
                        if (nyName && secondName) {
                            currenturl = layerConfig[nyName][secondName].url;
                            visiableArray = layerConfig[nyName][secondName].array;
                            searchField = layerConfig[nyName][secondName].searchField;
                            pUrl = layerConfig[nyName][secondName].pUrl;
                            pArray = layerConfig[nyName][secondName].pArray;

                        }
                        if (currenturl!="") {
                                                
                        fieldInfos = layerConfig[nyName][secondName].fieldInfos;
                        var url = layerConfig[nyName][secondName].jsondata;
                        $.ajax({
                            url: url,
                            dataType: 'json',
                            type: "GET",
                            async: true,
                            data: {},
                            success: function (data) {

                                ClusterData = data.features;

                                require(["Framework/SwitchLayer"], function (SwitchLayer) {
                                    SwitchLayer.switchLayer();
                                });

                            }
                        });                   
                        }
                        else {
                            ClusterData.length = 0;
                            $("#total").html("");
                        }
                     

                    })
                });
                $("#function").click(function () {

                    if ($('#farmArea').is(':hidden')) {
                        $("#farmArea").show();
                        $("#cityArea").hide();
                        $(this).css("background-position-y", "0px");
                    } else {
                        $("#farmArea").hide();
                        $("#cityArea").hide();
                        $(this).css("background-position-y", "-10px");
                    }

              
                })
                $("#farmArea img").click(function () {
                    $(".infocontent").hide();
                    map.infoWindow.hide();
            
                })
                $("#proSelect a").click(function () {
                    var proName = $(this).attr("value");
                    var areaNmae = $(this).text();

                    $(".sel-fun button").text(areaNmae);
                    $(".sel-fun button").append("<span class=\"caret\"></span>")
                    $("#cityArea").show();
              
                    sssy = areaNmae;
                    ssqy = "";
                    getsubArea(proName);

                    $("#farmArea").hide();
                    $(".infocontent>img").click(function () {
                        $(".infocontent").hide();


                    })

                })

                $("#search input").keyup(function () {
                    if ($("#search input").val() == "") {
                        $(".clearinput").hide();
                    }
                    else {
                        $(".clearinput").show();
                    }

                })
                $("#searchList ul").on("click", "li", function () {
                    $("#searchList ul li").css("background-color", "#fff");
                    $(this).css("background-color", "#0094ff ");

                    var index = Number($(this).attr("index"));

                    tempLayer.clear();
                    var lat = Number($(this).attr("x"));
                    var lng = Number($(this).attr("y"));


                    var sfs = new SimpleFillSymbol(SimpleFillSymbol.STYLE_SOLID, new SimpleLineSymbol(SimpleLineSymbol.STYLE_DASHDOT, new Color([0, 0, 255]), 2), new Color([255, 255, 0, 0.25]));
                    var polygon = searchLayer.graphics[index].geometry;
                    var attr = searchLayer.graphics[index].attributes;
                    var tempGraphic = new Graphic(polygon, sfs, searchLayer.graphics[index], attr);

                    tempLayer.add(tempGraphic);


                    var cp = polygon.getExtent().getCenter();
                    var content;
                    require(["Framework/SwitchLayer", "Framework/IdentifyTask"], function (SwitchLayer, IdentifyTask) {
                        content = IdentifyTask.getShowInfo(attr);
                    });
                   

                    map.infoWindow.setContent(content);
                    map.infoWindow.show(cp);

                    map.centerAndZoom([lat, lng], upLevel + 1);
                    map.infoWindow.show(cp);
                })
                $("#searchBtn").click(function () {
                    searchLayer.clear();
                    tempLayer.clear();
                    console.log($("#search input").val());
                    if ($("#search input").val() != "") {
                        $("#farmArea").hide();

                        $("#cityArea").hide();
                        require(["Framework/SwitchLayer", "Framework/IdentifyTask"], function (SwitchLayer, IdentifyTask) {
                            searchSql = SwitchLayer.getSearchSql($("#search input").val());
                            IdentifyTask.queryBySearch();
                        });
                      
                    } else {
                        alert("请输入名称");
                    }


                });
                $("#searchListHead img").click(function () {
                    $("#searchList ul").html("");
                    $("#searchList").hide();
                    $("#searchListHead").hide();
                })
                $(".clearinput").click(function () {
                    $("#search input").val("");
                    $(this).hide();
                    $("#searchList ul").html("");
                    $("#searchList").hide();
                    $("#searchListHead").hide();
                    
                    searchLayer.clear();
                    tempLayer.clear();
                    map.infoWindow.hide();
                });
                var type = "farmArea";
                var bool = true;
                $(".sel-fun img").click(function () {
                    if ($("#farmArea").is(":hidden") && $("#cityArea").is(":hidden")) {
                        bool = false;
                    } else {
                        bool = true;
                    }

                    if (bool) {
                        $("#cityArea").hide();
                        $("#farmArea").hide();
                    } else {
                        if ($("#farmArea").is(":hidden")) {
                            type = "cityArea";
                        } else {
                            type = "farmArea";
                        }
                        if (type == "cityArea") {
                            $("#farmArea").show();
                        } else {
                            $("#cityArea").show();
                        }
                    }


                })

                $("#proSelect").on("change", function () {

                    var proName = $(this).find("option:checked").val();
                    var areaNmae = $(this).find("option:checked").text();
                    $("#cityArea").show();

                    sssy = areaNmae;
                    ssqy = "";
                    getsubArea(proName);

                    $("#farmArea").hide();
                    $(".infocontent>img").click(function () {
                        $(".infocontent").hide();


                    })
                })


              
 
                $("#cityArea .control").on("click", ".sj", "", clickSArea);

                $("#cityArea .control").on("click", ".xj", "", clickArea);
            }

          

            function getblcok(city) {

                if (city == "浙江") {
                    var htm = "";
                    $.ajax({
                        url: 'Json/area.xml',
                        dataType: 'xml',
                        success: function (data) {
                            $(data).find("root").find("sjzone").each(function (index, ele) {
                                var id = $(ele).attr("id");
                                var value = $(ele).attr("value");
                                var name = $(ele).attr("name");
                                htm += "<span bh=" + id + " class='pt sj' id='std" + (index + 1) + "'>" + name + "</span>";
                            })
                            $("#cityArea .control").empty();
                            $("#cityArea .control").append(htm);
                        }
                    })

                } else {
                    $.ajax({
                        url: 'Json/area.xml',
                        dataType: 'xml',
                        success: function (data) {
                            var html = "";
                            $(data).find("root").find("sjzone").each(function (index, ele) {
                                var id = $(ele).attr("id");
                                var name = $(ele).attr("name");
                                if (name == city) {
                                    $(ele).find("xjzone").each(function (indexx, elex) {
                                        var xjid = $(elex).attr("id");
                                        var xjName = $(elex).attr("name");
                                        var xjLat = $(elex).attr("lat");
                                        var xjLng = $(elex).attr("lng");
                                        var hasXjvalue = $(elex).attr("value");
                                        var url = $(elex).attr("url");
                                        var layerindex;
                                        if ($(elex).attr("layerindex") != "") {
                                            layerindex = $(elex).attr("layerindex");
                                        } else {
                                            layerindex = 0;
                                        }
                                        var xjvalue = 0;
                                        if (hasXjvalue) {
                                            xjvalue = hasXjvalue;
                                        }
                                        html += "<span xjid=" + xjid + " xjName=" + xjName + " xjLat=" + xjLat + " xjLng=" + xjLng + " class='pt xj' id='xjtd" + xjid + "'>" + xjName + "</span>";
                                    });
                                }
                            });

                            $("#cityArea .control").empty();
                            $("#cityArea .control").append(html);
                        }
                    });
                }

            }


            function getsubArea(i) {

                if (map.getLayer("cityTextLayer")) {

                    map.removeLayer(map.getLayer("cityTextLayer"));
                }

                var areaId = i;

                if (map != undefined && areaId == "") {
                    map.centerAndZoom([120.19, 30.26], downLevel);
                }

                if (areaId == "浙江") {

                    var htm = "";
                    $.ajax({
                        url: 'Json/area.xml',
                        dataType: 'xml',
                        success: function (data) {

                            $(data).find("root").find("sjzone").each(function (index, ele) {
                                var id = $(ele).attr("id");
                                var value = $(ele).attr("value");
                                var name = $(ele).attr("name");


                                htm += "<span bh=" + id + " class='pt sj' id='std" + (index + 1) + "'>" + name + "</span>";
                            })
                            $("#cityArea .control").empty();
                            $("#cityArea .control").append(htm);
                            map.centerAndZoom([120.19, 30.26], downLevel);
                        }
                    })
     


                } else {
        

                    $.ajax({
                        url: 'Json/area.xml',
                        dataType: 'xml',
                        success: function (data) {
                            var html = "";
                            $(data).find("root").find("sjzone").each(function (index, ele) {
                                var id = $(ele).attr("id");
                                var name = $(ele).attr("name");
                                if (areaId == id) {
                                    var lat = Number($(ele).attr("lat"));
                                    var lng = Number($(ele).attr("lng"));

                                    if (map != undefined) {
                                        map.centerAndZoom([lat, lng], mapconfig.minZoom + 1);
                                    }
                                    $(ele).find("xjzone").each(function (indexx, elex) {
                                        var xjid = $(elex).attr("id");
                                        var xjName = $(elex).attr("name");
                                        var xjLat = $(elex).attr("lat");
                                        var xjLng = $(elex).attr("lng");
                                        var hasXjvalue = $(elex).attr("value");
                                        var url = $(elex).attr("url");
                                        var layerindex;
                                        if ($(elex).attr("layerindex") != "") {
                                            layerindex = $(elex).attr("layerindex");
                                        } else {
                                            layerindex = 0;
                                        }
                                        var xjvalue = 0;
                                        if (hasXjvalue) {
                                            xjvalue = hasXjvalue;
                                        }
                                    
                                        html += "<span xjid=" + xjid + " xjName=" + xjName + " xjLat=" + xjLat + " xjLng=" + xjLng + " class='pt xj' id='xjtd" + xjid + "'>" + xjName + "</span>";
                                    });
                                }
                            });

                            $("#cityArea .control").empty();
                            $("#cityArea .control").append(html);
                        }
                    });
                }

        
            }

            function clickSArea(i) {
           
                sssy = $(this).text();
                var areaNmae = $(this).text();
              
                $(".sel-fun button").text(areaNmae);
                $(".sel-fun button").append("<span class=\"caret\"></span>")
                ssqy = "";
                getsubArea($(this).attr("bh"));


            }
  
            function clickArea(xjid, xjname, lat, lng, layerindex, url) {
          
                var xjid = $(this).attr("xjid");
                var xjname = $(this).attr("xjname");
                var lat = $(this).attr("xjlat");
                var lng = $(this).attr("xjlng");

                if (map != undefined) {
       
                    map.centerAndZoom([parseFloat(lat), parseFloat(lng)], mapconfig.maxZoom + 1);
     
                }
                ssqy = xjname;
                var areaNmae = $(this).text();
    
                $(".sel-fun button").text(areaNmae);
                $(".sel-fun button").append("<span class=\"caret\"></span>")



      
                if ($("#xjtd" + xjid).hasClass("ptdown")) {
                    $(".ptdown").each(function (index, ele) {
                        $(ele).removeClass();
                        $(ele).addClass("xj ptdown");
                    });
                    $("#xjtd" + xjid).removeClass("ptdown");
                    $("#xjtd" + xjid).addClass("xj pt");
                } else {
                    $(".ptdown").each(function (index, ele) {
                        $(ele).removeClass();
                        $(ele).addClass("xj pt");
                    });
                    $("#xjtd" + xjid).removeClass();
                    $("#xjtd" + xjid).addClass("xj ptdown");
                }
                var fileid = xjid.toString().substring(0, 4) + "00";
        
            }

   
            function showLayer(maptype) {
       
                require(["TDTLayer", "TDTLayer_Anno"], function (TDTLayer, TDTLayer_Anno) {
                    if (maptype == "VECTOR") {
                        if (map.layerIds.length > 0) {
                            var rmap = map.getLayer(map.layerIds[0]);
                            var rmap_anno = map.getLayer(map.layerIds[1]);
                            map.removeLayer(rmap);
                            if (rmap_anno) {
                                map.removeLayer(rmap_anno);
                            }
                         
                        }
                        var layer = new TDTLayer("vec");
                        map.addLayer(layer, 0);
                        if ($(".MapMenu input[value='矢量注记']").attr("data-state") == "check") {
                            var annolayer = new TDTLayer_Anno("cva");
                            map.addLayer(annolayer, 1);
                        }

                    }
                    else {
                        if (map.layerIds.length > 0) {
                            var rmap = map.getLayer(map.layerIds[0]);
                            var rmap_anno = map.getLayer(map.layerIds[1]);
                            if (rmap_anno) {
                                map.removeLayer(rmap_anno);
                            }
                            map.removeLayer(rmap);

                        }
                        var layer = new TDTLayer("img");
                        map.addLayer(layer, 0);
                        if ($(".MapMenu input[value='影像注记']").attr("data-state") == "check") {
                            var annolayer = new TDTLayer_Anno("cia");
                            map.addLayer(annolayer, 1);
                        }
                    }
                })
            }

        });
    </script>
</head>

<body>
    <div style="position:absolute;z-index:1;width:100%;height:80px;background:url(images/topbg.png) left top repeat-x;">
        <div class="headerBox">
            <div class="header clearfix">
                <div class="logoNew fl"><img src="images/headeLogo.png"></div>
                <div class="navNew fr">

                </div>

            </div>
        </div>
    </div>
    <div class="slide">
        <div class="top clearfix">
            <i class="fl i1">
                <img src="images/i1.png" />
            </i>
            <span class="fl s1">农业两区</span>
            <select class="fr sel">
                <option value="330000">浙江省</option>
                <option value="330100">杭州市</option>
                <option value="330200">宁波市</option>
                <option value="330300">温州市</option>
                <option value="330400">嘉兴市</option>
                <option value="330500">湖州市</option>
                <option value="330600">绍兴市</option>
                <option value="330700">金华市</option>
                <option value="330800">衢州市</option>
                <option value="330900">舟山市</option>
                <option value="331000">台州市</option>
                <option value="331100">丽水市</option>
            </select>
        </div>
        <div class="sjBox">
            <div class="tabBox tabBox1">
                <ul class="clearfix">
                    <li class="clearfix">
                        <span class="s1 fl sj">杭州市</span>
                      
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">宁波市</span>
                        
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">温州市</span>
                        
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">嘉兴市</span>
                        
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">湖州市</span>
                        
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">绍兴市</span>
                        
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">金华市</span>
                        
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">衢州市</span>
                        
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">舟山市</span>
                        
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">台州市</span>
                        
                    </li>
                    <li class="clearfix">
                        <span class="s1 fl sj">丽水市</span>
                        
                    </li>
                </ul>
            </div>

        </div>
        <div class="jcdBox clearfix">
            <div class="jcd fl">
                <i class="fl i1">
                    <img src="images/check_active.png" />
                </i>
                <span class="s1 fl">粮食生产功能区</span>
            </div>
            <div class="jcd fl">
                <i class="fl i1">
                    <img src="images/check.png" />
                </i>
                <span class="s1 fl">现代农业园区</span>
            </div>
        </div>
        <div class="qhBox">
            <ul id="lsClass"class="clearfix qhList">
                <li class="active gn">功能区级别</li>
                <li class="zt">建设状态</li>
                <li class="mj">建设面积</li>
                <li class="nf">建设年份</li>
            </ul>
            <ul id="yqClass" class="clearfix qhList" style="display: none">
                <li class="active zdcy" >主导产业示范区</li>
                <li class="tsny">特色农业精品区</li>
            </ul>
        </div>
        <div class="checksBox">
            <div class="jb clearfix gn" value="建设等级">
                <div class="jbBox clearfix active">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl" ><img src="images/gis/省市县/左侧栏示例/省-左侧栏示例.png" /></span>
                    
                    <span class="s2 fl">省级</span>
                </div>
                <div class="jbBox clearfix active">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/省市县/左侧栏示例/市-左侧栏示例.png" /></span>
                    <span class="s2 fl">市级</span>
                </div>
                <div class="jbBox clearfix active">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/省市县/左侧栏示例/县-左侧栏示例.png" /></span>
                    <span class="s2 fl">县级</span>
                </div>
            </div>
            <div class="jb clearfix zt" value="建设状态" style="display: none">
                <div class="jbBox clearfix active">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl" ><img src="images/gis/建设状态/左侧栏示例/已建-左侧栏示例.png" /></span>

                    <span class="s2 fl">已建</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl" ><img src="images/gis/建设状态/左侧栏示例/在建-左侧栏示例.png" /></span>
                    <span class="s2 fl">在建</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl" ><img src="images/gis/建设状态/左侧栏示例/拟建-左侧栏示例.png" /></span>
                    <span class="s2 fl">拟建</span>
                </div>
            </div>
            <div class="jb clearfix mj" value="认定面积" style="display: none">
                <div class="jbBox clearfix active">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设面积/左侧栏示例/大于1000亩-左侧栏示例.png" /></span>

                    <span class="s2 fl">大于1000亩</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设面积/左侧栏示例/500-1000亩-左侧栏示例.png" /></span>
                    <span class="s2 fl">500~1000亩</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设面积/左侧栏示例/200-500亩-左侧栏示例.png" /></span>
                    <span class="s2 fl">200~500亩</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设面积/左侧栏示例/小于200亩-左侧栏示例.png" /></span>
                    <span class="s2 fl">小于200亩</span>
                </div>
            </div>
            <div class="jb clearfix nf" value="建设认定年" style="display: none">
                <div class="jbBox clearfix active">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设年份/左侧栏示例/2017-左侧栏示例.png" /></span>

                    <span class="s2 fl">2017</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设年份/左侧栏示例/2016-左侧栏示例.png" /></span>
                    <span class="s2 fl">2016</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设年份/左侧栏示例/2015-左侧栏示例.png" /></span>
                    <span class="s2 fl">2015</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设年份/左侧栏示例/2014-左侧栏示例.png" /></span>
                    <span class="s2 fl">2014</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设年份/左侧栏示例/2013-左侧栏示例.png" /></span>
                    <span class="s2 fl">2013</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设年份/左侧栏示例/2012-左侧栏示例.png" /></span>
                    <span class="s2 fl">2012</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设年份/左侧栏示例/2011-左侧栏示例.png" /></span>
                    <span class="s2 fl">2011</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/建设年份/左侧栏示例/2010-左侧栏示例.png" /></span>
                    <span class="s2 fl">2010</span>
                </div>
               
            </div>
            <div class="jb clearfix zdcy" value="产业类型" style="display: none">
                <div class="jbBox clearfix active">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/畜牧类.png" /></span>

                    <span class="s2 fl">畜牧类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/蔬菜瓜果类.png" /></span>
                    <span class="s2 fl">蔬菜瓜果类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/食用菌类.png" /></span>
                    <span class="s2 fl">食用菌类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/水果类.png" /></span>
                    <span class="s2 fl">水果类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/茶叶类.png" /></span>
                    <span class="s2 fl">茶叶类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/蚕桑类.png" /></span>
                    <span class="s2 fl">蚕桑类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/中药材类.png" /></span>
                    <span class="s2 fl">中药材类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/花卉苗木类.png" /></span>
                    <span class="s2 fl">花卉苗木类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/竹木类.png" /></span>
                    <span class="s2 fl">竹木类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/经济林类.png" /></span>
                    <span class="s2 fl">经济林类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/渔业类.png" /></span>
                    <span class="s2 fl">渔业类</span>
                </div>
             
                

            </div>
            <div class="jb clearfix tsny" value="产业类型" style="display: none">
                <div class="jbBox clearfix active">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/畜牧类.png" /></span>

                    <span class="s2 fl">畜牧类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/蔬菜瓜果类.png" /></span>
                    <span class="s2 fl">蔬菜瓜果类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/食用菌类.png" /></span>
                    <span class="s2 fl">食用菌类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/水果类.png" /></span>
                    <span class="s2 fl">水果类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/茶叶类.png" /></span>
                    <span class="s2 fl">茶叶类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/蚕桑类.png" /></span>
                    <span class="s2 fl">蚕桑类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/中药材类.png" /></span>
                    <span class="s2 fl">中药材类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/花卉苗木类.png" /></span>
                    <span class="s2 fl">花卉苗木类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/竹木类.png" /></span>
                    <span class="s2 fl">竹木类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/经济林类.png" /></span>
                    <span class="s2 fl">经济林类</span>
                </div>
                <div class="jbBox clearfix">
                    <i class="i1 fl">

                    </i>
                    <span class="s1 fl"><img src="images/gis/产业类别/渔业类.png" /></span>
                    <span class="s2 fl">渔业类</span>
                </div>



            </div>
        </div>
       
        <div class="searchBox">
            <input type="text" placeholder="输入关键词" />
            <a href="" class="soo">

            </a>
            <a href="javascript:void (0)" class="fr clearinput"><img src="images/searchX.png"></a>
        </div>
        <div class="srBtn"></div>
    </div>
  
    <div data-dojo-type="dijit/layout/BorderContainer"
         data-dojo-props="design:'headline',gutters:false"
         style="width: 100%; height: 100%; margin: 0;">


        <div id="map"
             data-dojo-type="dijit/layout/ContentPane"
             data-dojo-props="region:'center'">
        </div>
        <div id="typeinfo"></div>
        <div id="searchListHead"><img src="images/close.png" class="fr"></div>
        <div id="searchList"><ul></ul></div>
        <div id="zoomDiv">
            <div class="zoomin"></div>
            <div class="zoomout"></div>
            
        </div>
    </div>
    <div class="MapMenu">
        <a href="javascript:void(0)" title="矢量地图" class="Mapmap">
            <label><input name="矢量注记" type="checkbox" data-state="uncheck" value="矢量注记" />矢量注记</label>
        </a>
        <a href="javascript:void(0)" title="影像地图" class="Mapsatellite1">
            <label><input name="影像注记" type="checkbox" data-state="uncheck" value="影像注记" />影像注记</label>
        </a>

    </div>
</body>
</html>
